# ğŸ“‹ RÃ”LES ET FONCTIONNALITÃ‰S - APPLICATION RÃ‰QUISITION

## ğŸ” SYSTÃˆME D'AUTHENTIFICATION

### Utilisateurs ConfigurÃ©s
| RÃ´le | Nom d'utilisateur | Mot de passe | Service |
|------|------------------|--------------|---------|
| **Admin** | `admin` | `admin123` | ADMIN |
| **Ã‰metteur** | `edla.m` | `password123` | RH |
| **Analyste** | `analyste.compta` | `password123` | FIN |
| **Challenger** | `pm.user` | `password123` | ADMI |
| **Validateur** | `gm.user` | `password123` | ADMI |
| **Comptable** | `comptable` | `password123` | FIN |

---

## ğŸ‘¨â€ğŸ’¼ 1. RÃ”LE ADMINISTRATEUR (ADMIN)

### ğŸ¯ ResponsabilitÃ©s
- Gestion complÃ¨te du systÃ¨me
- Configuration des utilisateurs et services
- AccÃ¨s Ã  toutes les rÃ©quisitions
- Supervision gÃ©nÃ©rale

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. Gestion des Utilisateurs (`UserManagement.js`)
- âœ… **CrÃ©er** de nouveaux utilisateurs
  - Nom d'utilisateur (unique)
  - Mot de passe (cryptÃ© avec bcrypt)
  - Nom complet
  - Email
  - RÃ´le (Admin, Ã‰metteur, Analyste, Challenger, Validateur)
  - Service d'affectation
  
- âœ… **Modifier** les utilisateurs existants
  - Mise Ã  jour des informations
  - Changement de mot de passe (optionnel)
  - Modification du rÃ´le et service

- âœ… **DÃ©sactiver** des utilisateurs
  - Les utilisateurs dÃ©sactivÃ©s ne peuvent plus se connecter
  - Conservation de l'historique

- âœ… **Visualiser** tous les utilisateurs
  - Tableau avec statut (Actif/Inactif)
  - Filtrage et recherche
  - Codes couleur par rÃ´le

#### B. Gestion des Services (`ServiceManagement.js`)
- âœ… **CrÃ©er** de nouveaux services
  - ID du service (ex: RH, WH, MT)
  - Nom complet du service
  
- âœ… **Modifier** les services existants
  - Renommer les services
  - Mettre Ã  jour les informations

- âœ… **DÃ©sactiver** des services
  - Services inactifs non disponibles pour nouvelles rÃ©quisitions

#### C. AccÃ¨s aux RÃ©quisitions
- âœ… Voir **TOUTES** les rÃ©quisitions (sans filtre)
- âœ… AccÃ¨s Ã  tous les niveaux du workflow
- âœ… Consultation de l'historique complet

### ğŸ”§ API Endpoints Admin
```
POST   /api/auth/register          - CrÃ©er utilisateur
GET    /api/auth/users             - Liste des utilisateurs
PUT    /api/auth/users/:id         - Modifier utilisateur
DELETE /api/auth/users/:id         - DÃ©sactiver utilisateur

POST   /api/services               - CrÃ©er service
GET    /api/services               - Liste des services
PUT    /api/services/:id           - Modifier service
DELETE /api/services/:id           - DÃ©sactiver service
```

---

## ğŸ“ 2. RÃ”LE Ã‰METTEUR (EMETTEUR)

### ğŸ¯ ResponsabilitÃ©s
- CrÃ©er les rÃ©quisitions
- Suivre l'Ã©volution de ses propres rÃ©quisitions
- Fournir les piÃ¨ces justificatives

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. CrÃ©ation de RÃ©quisitions (`RequisitionForm.js`)
- âœ… **Formulaire de crÃ©ation**
  - SÃ©lection du service (RH, WH, MT, ADMI, IT, FIN)
  - Objet de la rÃ©quisition (description dÃ©taillÃ©e)
  - Montant USD (optionnel)
  - Montant CDF (optionnel)
  - Commentaire initial (optionnel)
  - PiÃ¨ces jointes (max 5 fichiers, 10MB chacun)
    - Formats acceptÃ©s: PDF, DOC, DOCX, XLS, XLSX, JPG, JPEG, PNG, GIF, TXT

- âœ… **GÃ©nÃ©ration automatique**
  - NumÃ©ro de rÃ©quisition unique: `REQ-YYYY-MM-XXXX`
  - Date d'initiation
  - Ã‰metteur automatiquement identifiÃ©
  - Niveau initial: `Ã©metteur`

#### B. Suivi des RÃ©quisitions (`RequisitionList.js`)
- âœ… **Visualisation**
  - Liste de **ses propres rÃ©quisitions uniquement**
  - Statut en temps rÃ©el
  - Indicateurs de progression

- âœ… **DÃ©tails de rÃ©quisition** (`RequisitionDetail.js`)
  - Informations complÃ¨tes
  - Historique des actions
  - Chat intÃ©grÃ© pour communication
  - TÃ©lÃ©chargement des piÃ¨ces jointes

#### C. Communication
- âœ… **Chat en temps rÃ©el**
  - Envoyer des messages
  - Clarifier les demandes
  - RÃ©pondre aux questions des analystes/validateurs

### ğŸ”§ API Endpoints Ã‰metteur
```
POST /api/requisitions                    - CrÃ©er rÃ©quisition
GET  /api/requisitions                    - Ses rÃ©quisitions uniquement
POST /api/requisitions/:id/chat           - Envoyer message
POST /api/requisitions/:id/pieces-jointes - Ajouter piÃ¨ces jointes
```

---

## ğŸ” 3. RÃ”LE ANALYSTE (ANALYSTE)

### ğŸ¯ ResponsabilitÃ©s
- Premier niveau de validation aprÃ¨s l'Ã©metteur
- Analyser la conformitÃ© des rÃ©quisitions
- Valider ou refuser les demandes

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. Validation des RÃ©quisitions (`RequisitionDetail.js`)
- âœ… **Actions disponibles**
  - **Valider** : Passe au niveau "Challenger" (PM)
  - **Modifier** : Retourne Ã  l'Ã©metteur pour modifications
  - **Refuser** : Rejette la rÃ©quisition (fin du processus)
  
- âœ… **Commentaire obligatoire**
  - Chaque action nÃ©cessite un commentaire
  - Historique complet des dÃ©cisions

#### B. AccÃ¨s aux RÃ©quisitions
- âœ… Voir les rÃ©quisitions Ã  partir du niveau **analyste**
- âœ… Niveaux accessibles: `analyste`, `challenger`, `validateur`, `paiement`, `justificatif`

#### C. Validation Paiement
- âœ… **Valider les paiements** effectuÃ©s par le comptable
  - Bouton "Valider le Paiement"
  - Passage au niveau "justificatif"

#### D. Validation Justificatifs
- âœ… **Terminer les rÃ©quisitions**
  - VÃ©rifier les justificatifs tÃ©lÃ©chargÃ©s
  - Valider les montants justifiÃ©s
  - ClÃ´turer le dossier

### ğŸ”§ API Endpoints Analyste
```
PUT  /api/requisitions/:id/action           - Actions (valider/modifier/refuser)
POST /api/requisitions/:id/valider-paiement - Valider paiement
POST /api/requisitions/:id/terminer          - Terminer rÃ©quisition
```

---

## ğŸ¯ 4. RÃ”LE CHALLENGER (PM - Project Manager)

### ğŸ¯ ResponsabilitÃ©s
- DeuxiÃ¨me niveau de validation
- Challenge des demandes
- VÃ©rification de la pertinence

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. Validation des RÃ©quisitions
- âœ… **Actions disponibles**
  - **Valider** : Passe au niveau "Validateur" (GM)
  - **Modifier** : Retourne Ã  l'analyste
  - **Refuser** : Rejette la rÃ©quisition

- âœ… **Commentaire obligatoire** pour chaque action

#### B. AccÃ¨s aux RÃ©quisitions
- âœ… Voir les rÃ©quisitions Ã  partir du niveau **challenger**
- âœ… Niveaux accessibles: `challenger`, `validateur`, `paiement`, `justificatif`

#### C. Historique Financier (`FinancialHistory.js`)
- âœ… **Consultation des mouvements**
  - Historique des rÃ©quisitions payÃ©es
  - Statistiques financiÃ¨res
  - Rapports par pÃ©riode

### ğŸ”§ API Endpoints Challenger
```
PUT /api/requisitions/:id/action - Actions (valider/modifier/refuser)
GET /api/reports/financial       - Historique financier
```

---

## âœ… 5. RÃ”LE VALIDATEUR (GM - General Manager)

### ğŸ¯ ResponsabilitÃ©s
- Validation finale avant paiement
- Approbation des montants importants
- DÃ©cision finale sur les rÃ©quisitions

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. Validation Finale
- âœ… **Actions disponibles**
  - **Valider** : Passe au niveau "Paiement"
  - **Modifier** : Retourne au challenger
  - **Refuser** : Rejette la rÃ©quisition

- âœ… **Commentaire obligatoire**

#### B. AccÃ¨s aux RÃ©quisitions
- âœ… Voir les rÃ©quisitions Ã  partir du niveau **validateur**
- âœ… Niveaux accessibles: `validateur`, `paiement`, `justificatif`

#### C. Historique Financier (`FinancialHistory.js`)
- âœ… **Supervision financiÃ¨re**
  - Vue d'ensemble des paiements
  - Statistiques de validation
  - Rapports de performance

### ğŸ”§ API Endpoints Validateur
```
PUT /api/requisitions/:id/action - Actions (valider/modifier/refuser)
GET /api/reports/financial       - Historique financier
```

---

## ğŸ’° 6. RÃ”LE COMPTABLE (COMPTABLE)

### ğŸ¯ ResponsabilitÃ©s
- Gestion des paiements
- Gestion des fonds disponibles
- Suivi financier

### ğŸ“Œ FonctionnalitÃ©s Principales

#### A. Gestion des Paiements (`PaymentManagement.js`)
- âœ… **Dashboard de paiements**
  - Vue d'ensemble des rÃ©quisitions validÃ©es
  - Fonds disponibles (USD et CDF)
  - RÃ©quisitions en attente de paiement

- âœ… **Effectuer des paiements**
  - Paiement individuel
  - Paiement groupÃ© (multiple sÃ©lection)
  - VÃ©rification de fonds suffisants
  - Commentaire obligatoire

#### B. Gestion des Fonds
- âœ… **Ravitaillement de caisse**
  - Ajouter des fonds USD
  - Ajouter des fonds CDF
  - Historique des ravitaillements

- âœ… **Mouvements de caisse**
  - EntrÃ©es (ravitaillements)
  - Sorties (paiements)
  - Solde en temps rÃ©el

#### C. FonctionnalitÃ©s AvancÃ©es
- âœ… **Filtrage et recherche**
  - Par numÃ©ro de rÃ©quisition
  - Par service
  - Par initiateur
  - Par statut

- âœ… **Tri des rÃ©quisitions**
  - Par date d'initiation
  - Par montant
  - Par Ã¢ge (rÃ©quisitions > 10 jours en rouge)

- âœ… **Export et impression**
  - Export Excel (CSV)
  - Impression du rapport

- âœ… **Alertes intelligentes**
  - RÃ©quisitions de plus de 10 jours
  - Fonds insuffisants
  - Paiements urgents

#### D. AccÃ¨s aux RÃ©quisitions
- âœ… Voir les rÃ©quisitions **validÃ©es** et plus
- âœ… Niveaux accessibles: `validateur`, `paiement`, `justificatif`

### ğŸ”§ API Endpoints Comptable
```
POST /api/paiements/effectuer           - Effectuer paiement(s)
POST /api/fonds/ravitailler            - Ravitailler caisse
GET  /api/fonds/disponibles            - Consulter fonds
GET  /api/fonds/mouvements             - Historique mouvements
GET  /api/requisitions?niveau=paiement - RÃ©quisitions Ã  payer
```

---

## ğŸ”„ WORKFLOW COMPLET

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ã‰METTEUR   â”‚ â†’ CrÃ©e la rÃ©quisition
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ANALYSTE   â”‚ â†’ Valide / Modifie / Refuse
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CHALLENGER  â”‚ â†’ Valide / Modifie / Refuse
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VALIDATEUR  â”‚ â†’ Valide / Modifie / Refuse
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPTABLE   â”‚ â†’ Effectue le paiement
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ANALYSTE   â”‚ â†’ Valide le paiement
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ã‰METTEUR   â”‚ â†’ TÃ©lÃ©charge justificatifs
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ANALYSTE/COMP â”‚ â†’ Valide justificatifs â†’ TERMINÃ‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” SYSTÃˆME DE PERMISSIONS

### VisibilitÃ© des RÃ©quisitions

| RÃ´le | RÃ©quisitions Visibles |
|------|----------------------|
| **Admin** | TOUTES |
| **Ã‰metteur** | Ses propres rÃ©quisitions uniquement |
| **Analyste** | Ã€ partir du niveau `analyste` |
| **Challenger** | Ã€ partir du niveau `challenger` |
| **Validateur** | Ã€ partir du niveau `validateur` |
| **Comptable** | Ã€ partir du niveau `validateur` |

### Actions AutorisÃ©es

| Action | Admin | Ã‰metteur | Analyste | Challenger | Validateur | Comptable |
|--------|-------|----------|----------|------------|------------|-----------|
| CrÃ©er rÃ©quisition | âœ… | âœ… | âŒ | âŒ | âŒ | âŒ |
| Valider/Modifier/Refuser | âŒ | âŒ | âœ… | âœ… | âœ… | âŒ |
| Effectuer paiement | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| Valider paiement | âŒ | âŒ | âœ… | âŒ | âŒ | âœ… |
| Valider justificatifs | âŒ | âŒ | âœ… | âŒ | âŒ | âœ… |
| GÃ©rer utilisateurs | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| GÃ©rer services | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |

---

## ğŸ’¬ FONCTIONNALITÃ‰S COMMUNES

### Chat IntÃ©grÃ©
- âœ… Disponible pour **tous les rÃ´les**
- âœ… Communication en temps rÃ©el via Socket.IO
- âœ… Historique complet des conversations
- âœ… Contexte par rÃ©quisition

### Notifications Temps RÃ©el
- âœ… Mise Ã  jour automatique des rÃ©quisitions
- âœ… Notifications des nouveaux messages
- âœ… Synchronisation entre utilisateurs

### PiÃ¨ces Jointes
- âœ… Upload de fichiers multiples
- âœ… Formats variÃ©s (PDF, Office, Images, etc.)
- âœ… Limite de 10MB par fichier
- âœ… TÃ©lÃ©chargement sÃ©curisÃ©

---

## ğŸ“Š RAPPORTS ET STATISTIQUES

### Rapports Financiers (`FinanceReport.js`)
- âœ… Graphiques de rÃ©partition par statut
- âœ… Graphiques de rÃ©partition par service
- âœ… Totaux USD et CDF
- âœ… DÃ©tail des montants par rÃ©quisition

### Historique Financier (`FinancialHistory.js`)
- âœ… Pour Challenger et Validateur
- âœ… Vue chronologique des mouvements
- âœ… Statistiques de performance

---

## ğŸ”§ TECHNOLOGIES UTILISÃ‰ES

### Backend
- **Node.js** + **Express**
- **Socket.IO** (temps rÃ©el)
- **JWT** (authentification)
- **bcryptjs** (cryptage mots de passe)
- **Multer** (upload fichiers)
- **Moment.js** (gestion dates)

### Frontend
- **React 18**
- **Material-UI (MUI)**
- **Socket.IO Client**
- **Moment.js**
- **Recharts** (graphiques)

### SÃ©curitÃ©
- âœ… Authentification par JWT
- âœ… Mots de passe cryptÃ©s avec bcrypt
- âœ… Middleware d'autorisation par rÃ´le
- âœ… Validation des permissions sur chaque endpoint

---

## ğŸš€ DÃ‰MARRAGE RAPIDE

```bash
# Installation
npm run install-all

# DÃ©marrage dÃ©veloppement
npm run dev

# AccÃ¨s
Frontend: http://localhost:3000
Backend:  http://localhost:5000
```

---

**ğŸ“… Date de crÃ©ation:** Octobre 2025  
**ğŸ‘¨â€ğŸ’» DÃ©veloppeur:** Toto Mulumba  
**ğŸ“ Version:** 1.0.0
